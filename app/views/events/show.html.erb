<div class="main-wrapper">
  <!-- Event details -->
  <% if current_user == @user %>
    <%= link_to "Edit", edit_event_path %>
  <% end %>

  <div class="event-header-container">
    <%= image_tag (@event.image_url(:mobile)) %>

    <div class="event-details">
      <% @event.method_names.each do |method| %>
        <h2><%= method %></h2>
      <% end %>
    </div>
  </div>


  <div class="popup-buttons-wrapper">
    <!-- Request To Join (POPUP) -->
    <div class="request-to-join-button">
      <div class="modal">
        <label for="modal-1">
          <div class="modal-trigger">Request to Join</div>
        </label>
        <input class="modal-state" id="modal-1" type="checkbox" />
        <div class="modal-fade-screen">
          <div class="modal-inner">
            <div class="modal-close" for="modal-1"></div>
              <div class="avatars">
                <div class="profile-pic-modal"><%= image_tag (current_user.avatar_url(:mobile)), class: "popup-pic" %></div>
                <div class="profile-pic-modal"><%= image_tag (@user.avatar_url(:mobile)), class: "popup-pic" %></div>
              </div>
              <%= render 'request' %>
          </div>
        </div>
      </div>
    </div>



    <!-- Map (POPUP) -->
    <div class="map-button">
      <div class="modal">
        <label for="modal-2">
          <div class="modal-trigger">View Map</div>
        </label>
        <input class="modal-state" id="modal-2" type="checkbox" />
        <div class="modal-fade-screen">
          <div class="modal-inner">
            <div class="modal-close" for="modal-2"></div>
              <div class="map-container">
                <div class="map">
                  <div class="event-map-canvas" data-latitude="<%= @event.latitude.to_f %>" data-longitude="<%= @event.longitude.to_f %>">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  <!-- Add A Review (POPUP) -->
    <div class="review-button">
      <div class="modal">
        <label for="modal-3">
          <div class="modal-trigger">Add a Review</div>
        </label>
        <input class="modal-state" id="modal-3" type="checkbox" />
        <div class="modal-fade-screen">
          <div class="modal-inner">
            <div class="modal-close" for="modal-3"></div>
            <div class="new-review">
              <%= render "new_review" %>
            </div>
            </div>
          </div>
        </div>
      </div>
    </div>



  </div>
  <!-- Event reviews -->

  <div class="reviews-wrapper">
    <h1>Reviews</h1>

    <div id="review-form-errors">
      <%= render "review_errors" %>
    </div>

    <div class="new-review">
      <%= render "new_review" %>
    </div>

    <div class="reviews">
      <%= render "review" %>
    </div>
  </div>
</div>
